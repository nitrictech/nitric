# Code generated by Nitric SDK generator. DO NOT EDIT.

import os
import grpc
from sdk.gen.storage.v2 import storage_pb2_grpc
{{if .Buckets}}
from sdk.buckets import Bucket
{{end}}

class NitricClient:
    def __init__(self):
        address = os.getenv("NITRIC_SERVICE_ADDRESS")
        if address == "":
            address = "localhost:50051"
        
        self._channel = grpc.insecure_channel(address)
        {{if .Buckets}}
        self._storage_client = storage_pb2_grpc.StorageStub(self._channel)
        {{end}}
        
        {{range .Buckets}}
        self.{{.CamelCase}} = Bucket(self._storage_client, "{{.Unmodified}}")
        {{end}}

    def close(self):
        self._channel.close()

